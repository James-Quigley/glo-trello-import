(function(e){function t(t){for(var r,o,l=t[0],i=t[1],c=t[2],m=0,u=[];m<l.length;m++)o=l[m],s[o]&&u.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,l=1;l<a.length;l++){var i=a[l];0!==s[i]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={1:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/glo-trello-import/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=i;n.push([3,0]),a()})({3:function(e,t,a){e.exports=a("Vtdi")},Vtdi:function(e,t,a){"use strict";a.r(t);a("VRzm");var r=a("nDAh"),s=(a("Ud79"),a("ejmO"),a("Kw5r")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("md-toolbar",{staticClass:"md-primary"},[a("span",{staticClass:"md-title"},[e._v("Trello -> Glo Import")])]),a("div",[a("div",{staticClass:"md-layout md-alignment-center",staticStyle:{position:"absolute",top:"14px",width:"100%"}},[a("div",{staticClass:"md-layout-item"},[a("md-progress-bar",{staticClass:"md-accent",staticStyle:{display:"none"},attrs:{id:"progress","md-mode":"indeterminate"}})],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-small-size-100 md-xsmall-size-100"},[a("md-card",{staticClass:"md-primary"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Trello Credentials")])]),a("md-card-content",[a("p",[e._v("You will need to get your API Key and Token from\n                            "),a("a",{staticClass:"md-accent",attrs:{href:"https://trello.com/app-key"}},[e._v("Trello")]),e._v(".")]),a("div",{attrs:{id:"trello"}},[a("md-field",[a("label",[e._v("API Key")]),a("md-input",{model:{value:e.trelloApiKey,callback:function(t){e.trelloApiKey=t},expression:"trelloApiKey"}})],1),a("md-field",[a("label",[e._v("Token")]),a("md-input",{model:{value:e.trelloToken,callback:function(t){e.trelloToken=t},expression:"trelloToken"}})],1)],1)]),a("md-card-actions",[a("md-button",{staticClass:"md-accent md-raised",on:{click:e.loadTrello}},[e._v("Load Boards")])],1)],1)],1),a("div",{staticClass:"md-layout-item md-small-size-100 md-xsmall-size-100"},[a("md-card",{staticClass:"md-primary"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Glo Credentials")])]),a("md-card-content",[a("p",[e._v("Your Glo Token can be found in the developer tools while on Glo. An official Public API should\n                            be out soon.")]),a("div",{attrs:{id:"glo"}},[a("md-field",[a("label",[e._v("Board to Import")]),a("md-select",{model:{value:e.selectedBoard,callback:function(t){e.selectedBoard=t},expression:"selectedBoard"}},e._l(e.trelloBoards,function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v("\n                                        "+e._s(t.name)+"\n                                    ")])}))],1),a("md-field",[a("label",{attrs:{for:"glo-api-token"}},[e._v("API Token")]),a("md-input",{model:{value:e.gloToken,callback:function(t){e.gloToken=t},expression:"gloToken"}})],1)],1)]),a("md-card-actions",[a("md-button",{staticClass:"md-accent md-raised",on:{click:e.importBoard}},[e._v("Import!")])],1)],1)],1)]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("div",{staticClass:"md-title"},[e._v("Details")]),a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-xlarge-size-100 md-large-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100",staticStyle:{"margin-top":"5px"}},[a("md-card",[a("md-card-header",[a("md-icon",{staticClass:"md-accent"},[e._v("transform")]),a("span",{staticClass:"md-title"},[e._v(" Summary")])],1),a("md-card-content",[a("p",[e._v("This application will take an existing\n                                    "),a("a",{staticClass:"md-accent",attrs:{href:"https://trello.com"}},[e._v("Trello")]),e._v(" board and import it into\n                                    "),a("a",{staticClass:"md-accent",attrs:{href:"https://app.gitkraken.com/glo"}},[e._v("GitKraken Glo")]),e._v("! Note that Glo is under active development, and therefore\n                                    not all parts of a Trello board may be copied 1:1.")])])],1)],1),a("div",{staticClass:"md-layout-item md-xlarge-size-100 md-large-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100",staticStyle:{"margin-top":"5px"}},[a("md-card",[a("md-card-header",[a("md-icon",{staticClass:"md-accent"},[e._v("sync_disabled")]),a("span",{staticClass:"md-title"},[e._v(" One-Time Sync")])],1),a("md-card-content",[a("p",[e._v("This application is only a one-time import. This will not sync your items back\n                                    and forth between Trello and Glo.")])])],1)],1),a("div",{staticClass:"md-layout-item md-xlarge-size-100 md-large-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100",staticStyle:{"margin-top":"5px"}},[a("md-card",[a("md-card-header",[a("md-icon",{staticClass:"md-accent"},[e._v("security")]),a("span",{staticClass:"md-title"},[e._v(" Security")])],1),a("md-card-content",[a("p",[e._v("We ask for your credentials for both services so that we can make API calls on\n                                    your behalf, automating the copy process. This application is entirely client\n                                    side, meaning the only time the credentials leave this page is when they\n                                    are used to make those API calls.\n                                    ")])])],1)],1),a("div",{staticClass:"md-layout-item md-xlarge-size-100 md-large-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100",staticStyle:{"margin-top":"5px"}},[a("md-card",[a("md-card-header",[a("md-icon",{staticClass:"md-accent"},[e._v("list")]),a("span",{staticClass:"md-title"},[e._v(" Copied Items:")])],1),a("md-card-content",[a("md-list",[a("md-list-item",[e._v("Board Name")]),a("md-list-item",[e._v("Board Columns")]),a("md-list-item",[e._v("Labels")]),a("md-list-item",[e._v("Card Name")]),a("md-list-item",[e._v("Card Description")]),a("md-list-item",[e._v("Card Tasks")])],1)],1)],1)],1)])])])])],1)},o=[],l=(a("rE2o"),a("ioFf"),a("ls82"),a("MECJ")),i=(a("f3/d"),a("rGqo"),a("yt8O"),a("vDqi")),c=a.n(i),d=null,m=null,u={name:"app",data:function(){return{trelloApiKey:"",trelloToken:"",trelloBoards:[],trelloCards:[],trelloColumns:[],trelloLabels:{},selectedBoard:"",gloToken:"",gloBoard:null,gloColumns:{},gloLabels:{},columnMappings:{},labelMappings:{},cardMappings:{}}},components:{},methods:{loadTrello:function(e){var t=this;document.getElementById("progress").style.display="block",d=c.a.create({baseURL:"https://api.trello.com/1",params:{key:this.trelloApiKey,token:this.trelloToken}}),d.get("/members/me/boards").then(function(e){console.log(e),t.trelloBoards=e.data,document.getElementById("progress").style.display="none"}).catch(function(e){console.log(e)})},importBoard:function(e){var t=this;document.getElementById("progress").style.display="block",console.log(this.selectedBoard);var a=[d.get("/boards/".concat(this.selectedBoard,"/cards")),d.get("/boards/".concat(this.selectedBoard,"/lists")),d.get("/boards/".concat(this.selectedBoard,"/labels"))];Promise.all(a).then(function(e){console.log("cards",e[0]),t.trelloCards=e[0].data,console.log("columns",e[1]),t.trelloColumns=e[1].data,console.log("labels",e[2]),e[2].data.forEach(function(e){t.trelloLabels[e.name]=e}),t.createBoard()}).catch(function(e){console.error("uh oh",e)})},createBoard:function(){var e=this,t=this.trelloBoards.filter(function(t){return t.id==e.selectedBoard})[0].name;m=c.a.create({baseURL:"https://gloapi.gitkraken.com/v1/glo/",headers:{authorization:this.gloToken}}),console.log("Creating Glo Board with name:",t),m.post("/boards",{name:t,isPublic:!1}).then(function(t){console.log("Board created",t),e.gloBoard=t.data,e.createColumns()})},createColumns:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("Creating columns in Glo"),e.prev=1,t=0;case 3:if(!(t<this.trelloColumns.length)){e.next=13;break}return a=this.trelloColumns[t],e.next=7,m.post("/boards/".concat(this.gloBoard.id,"/columns"),{name:a.name,order:t});case 7:r=e.sent,this.gloColumns[r.data.id]=r.data,this.columnMappings[a.id]=r.data;case 10:t++,e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.error("Failed to create columns",e.t0);case 18:console.log("Created columns",this.gloColumns),this.createLabels();case 20:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}(),createLabels:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("Creating labels in Glo"),e.t0=regeneratorRuntime.keys(this.trelloLabels);case 2:if((e.t1=e.t0()).done){e.next=13;break}if(t=e.t1.value,a=this.trelloLabels[t],""==a.name){e.next=11;break}return e.next=8,m.post("/boards/".concat(this.gloBoard.id,"/labels"),{name:a.name,color:this.getLabelColor(a.color)});case 8:r=e.sent,this.gloLabels[r.data.id]=r.data,this.labelMappings[a.id]=r.data;case 11:e.next=2;break;case 13:console.log("Created labels",this.gloLabels),console.log("Label mapping",this.labelMappings),this.createCards();case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getLabelColor:function(e){switch(e){case"yellow":return{r:230,g:215,b:71};case"purple":return{r:157,g:104,b:255};case"blue":return{r:0,g:97,b:173};case"red":return{r:187,g:45,b:41};case"green":return{r:31,g:126,b:56};case"orange":return{r:240,g:147,b:43};case"black":return{r:77,g:77,b:77};case"sky":return{r:30,g:192,b:193};case"pink":return{r:241,g:87,b:218};case"lime":return{r:89,g:196,b:102};case null:return{r:182,g:187,b:191}}},createCards:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s,n,o,l,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("Creating cards in Glo"),t={},a=0;case 3:if(!(a<this.trelloCards.length)){e.next=18;break}return r=this.trelloCards[a],s=this.gloBoard.id,n=this.columnMappings[r.idList].id,o=r.idLabels.map(function(e){return{id:c.labelMappings[e].id,name:c.labelMappings[e].name}}),null==t[n]&&(t[n]=0),l=t[n]++,console.log("board",s,"column",n,"labels",o,"position",l),e.next=13,m.post("/boards/".concat(this.gloBoard.id,"/cards"),{board_id:s,column_id:n,labels:o,name:r.name,position:l,due_date:r.due});case 13:i=e.sent,this.cardMappings[r.id]=i.data;case 15:a++,e.next=3;break;case 18:console.log("Created cards!"),this.addDescriptions();case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addDescriptions:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a,r,s,n,o,l,i,c,u,p,g,h,f,b,v,y,k,C,x,_,w,B,T;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("Adding descriptions to cards in Glo"),t=!0,a=!1,r=void 0,e.prev=4,s=this.trelloCards[Symbol.iterator]();case 6:if(t=(n=s.next()).done){e.next=65;break}o=n.value,l=[],i=!0,c=!1,u=void 0,e.prev=12,p=o.idChecklists[Symbol.iterator]();case 14:if(i=(g=p.next()).done){e.next=41;break}return h=g.value,e.next=18,d.get("/checklists/".concat(h,"/checkItems"));case 18:for(f=e.sent.data,b=!0,v=!1,y=void 0,e.prev=22,k=f[Symbol.iterator]();!(b=(C=k.next()).done);b=!0)x=C.value,l.push(x);e.next=30;break;case 26:e.prev=26,e.t0=e["catch"](22),v=!0,y=e.t0;case 30:e.prev=30,e.prev=31,b||null==k.return||k.return();case 33:if(e.prev=33,!v){e.next=36;break}throw y;case 36:return e.finish(33);case 37:return e.finish(30);case 38:i=!0,e.next=14;break;case 41:e.next=47;break;case 43:e.prev=43,e.t1=e["catch"](12),c=!0,u=e.t1;case 47:e.prev=47,e.prev=48,i||null==p.return||p.return();case 50:if(e.prev=50,!c){e.next=53;break}throw u;case 53:return e.finish(50);case 54:return e.finish(47);case 55:for(_="",w=0;w<l.length;w++)B=l[w],"complete"==B.state?_+="- [x] ":_+="- [ ] ",_+="".concat(B.name,"\n");console.log("tasks for card",l),console.log("Card mappings",this.cardMappings),console.log("card",o),T=this.cardMappings[o.id].id,m.post("/boards/".concat(this.gloBoard.id,"/cards/").concat(T),{id:T,description:{text:"".concat(o.desc,"\n").concat(_)},fields:["description","total_task_count","completed_task_count"]});case 62:t=!0,e.next=6;break;case 65:e.next=71;break;case 67:e.prev=67,e.t2=e["catch"](4),a=!0,r=e.t2;case 71:e.prev=71,e.prev=72,t||null==s.return||s.return();case 74:if(e.prev=74,!a){e.next=77;break}throw r;case 77:return e.finish(74);case 78:return e.finish(71);case 79:console.log("Added Descriptions!"),document.getElementById("progress").style.display="none";case 81:case"end":return e.stop()}},e,this,[[4,67,71,79],[12,43,47,55],[22,26,30,38],[31,,33,37],[48,,50,54],[72,,74,78]])}));return function(){return e.apply(this,arguments)}}()}},p=u,g=(a("nNx0"),a("KHd+")),h=Object(g["a"])(p,n,o,!1,null,null,null),f=h.exports,b=a("L2JU");s["default"].use(b["a"]);var v=new b["a"].Store({state:{},mutations:{},actions:{}});s["default"].config.productionTip=!1,s["default"].use(r["MdButton"]),s["default"].use(r["MdCard"]),s["default"].use(r["MdField"]),s["default"].use(r["MdMenu"]),s["default"].use(r["MdList"]),s["default"].use(r["MdApp"]),s["default"].use(r["MdContent"]),s["default"].use(r["MdToolbar"]),s["default"].use(r["MdProgress"]),new s["default"]({store:v,render:function(e){return e(f)}}).$mount("#app")},boi5:function(e,t,a){},ejmO:function(e,t,a){},nNx0:function(e,t,a){"use strict";var r=a("boi5"),s=a.n(r);s.a}});
//# sourceMappingURL=app.ec8c06f9.js.map